<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>COMM 550-Labs Four and Five: T and Z Tests</title>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>

<!-- MathJax scripts -->
<script type="text/javascript" src="https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}

pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<h1>COMM 550-Labs Four and Five: T and Z Tests</h1>

<h4><a href="http://joshaclark.com/?page_id=138">Back</a></h4>

<p>Welcome to the lab four and five demo! Lab four will be primarily done with pen and paper
but it is useful to know how these concepts works in R as they will pop up again in later
labs.
Although you should learn how to do a Z test by hand let&#39;s do one in R to show you to code as well.
This is useful for double-checking answers!
T Z=test is not normally used in statistics because it is rare that we know the parameters of a population.
Therefore we have to install a new package, &ldquo;TeachingDemos&rdquo; and mount it.</p>

<blockquote>
<p>install.packages(&#39;TeachingDemos&#39;) </p>
</blockquote>

<pre><code class="r">library(TeachingDemos)
</code></pre>

<p>We&#39;ll also need the car packages (vrooom!)</p>

<pre><code class="r">library(car)
</code></pre>

<p>To run a z test we need a value which we are testing, the mean of the population, the standard deviation of
the population and what we are looking for (probabilities of values greater than? Less than?).
Let&#39;s try with an example from the lab, we know battery lifetime is normally distributed, mean=500, sd=50. We 
want to know how many of our 200 batteries will last longer than 600 hours.</p>

<pre><code class="r">z.test(600, mu=500, sd=50, alternative=&#39;greater&#39;)
</code></pre>

<pre><code>## 
##  One Sample z-test
## 
## data:  600
## z = 2, n = 1, Std. Dev. = 50, Std. Dev. of the sample mean = 50,
## p-value = 0.02275
## alternative hypothesis: true mean is greater than 500
## 95 percent confidence interval:
##  517.8   Inf
## sample estimates:
## mean of 600 
##         600
</code></pre>

<p>P value of 0.02275, so that&#39;s the proportion of the 200 we can expect to have a life greater than 600 hours. 
To get the raw total we have to multiply that proportion by the number of batteries we have.</p>

<pre><code class="r">200*0.02275
</code></pre>

<pre><code>## [1] 4.55
</code></pre>

<p>So roughly 4 of the two hundred batteries will last longer than 200 hours (maybe).
Most of lab 4 requires calculations by hand. This is a useful exercise and isn&#39;t as hard as it might seem
you can always use R as a calculator or to use the Z-test function to get results. As an example to calculate 
a 95% confidence interval we can use the formula m+1.96(SE) and m-1.96(SE) where SE = SD/sqrt(n). Let&#39;s take 
the battery example where the mean is 500, n=200 (the number of batteries we bought) and SD=50</p>

<pre><code class="r">M.CI&lt;-500
N.CI&lt;-200
Std.Dev.CI&lt;-50
Std.Err.CI&lt;-Std.Dev.CI/sqrt(N.CI)
high.ci&lt;-M.CI+1.96*Std.Err.CI
high.ci
</code></pre>

<pre><code>## [1] 506.9
</code></pre>

<pre><code class="r">low.ci&lt;-M.CI-1.96*Std.Err.CI
low.ci
</code></pre>

<pre><code>## [1] 493.1
</code></pre>

<p>T-TESTS AND OTHER FUN
The data set contains part of the data for a study of oral condition of cancer patients conducted at the
Mid-Michigan Medical Center.  The oral conditions of the patients were measured and recorded at the initial stage,
at the end of the second week, at the end of the fourth week, and at the end of the sixth week.  The variables age, 
initial weight and initial cancer stage of the patients were recorded.  Patients were divided into two groups at
random:  One group received a placebo and the other group received aloe juice treatment.
Sample size, n = 25 patients with neck cancer. The treatment is Aloe Juice. The variables in the data set are:</p>

<ul>
<li>ID- Patient ID</li>
<li>TRT- treatment group:  0 = placebo; 1 = aloe juice</li>
<li>AGE- patient&#39;s age in years</li>
<li>WEIGHTIN- patient&#39;s weight at the initial stage</li>
<li>STAGE- initial cancer stage, coded 1 through 4</li>
<li>TOTALCIN- oral condition at the initial stage</li>
<li>TOTALCW2- oral condition at the end of week 2</li>
<li>TOTALCW4- oral condition at the end of week 4</li>
<li>TOTALCW6- oral condition at the end of week 6</li>
</ul>

<p>NOTE:  The variables TOTALCIN, TOTALCW2, TOTALCW4, and TOTALCW6 are the dependent variables, 
constituting repeated measures over time.<br/>
All of the study participants were male and of the same ethnicity so these variables aren&#39;t in our data.
This data is drawn from <a href="http://calcnet.mth.cmich.edu/org/spss/Prj_cancer_data.htm">Central Michighan University</a> 
Let&#39;s read the data, notice the line saying that the file has a header row with variable names included.</p>

<pre><code class="r">can&lt;-read.csv(url(&#39;http://joshaclark.com/wp-content/uploads/2014/05/cancer.csv&#39;))
</code></pre>

<p>And take a look to make sure everything matches up</p>

<pre><code class="r">head(can)
</code></pre>

<pre><code>##   ID TRT AGE WEIGHIN STAGE TOTALCIN TOTALCW2 TOTALCW4 TOTALCW6
## 1  1   0  52   124.0     2        6        6        6        7
## 2  5   0  77   160.0     1        9        6       10        9
## 3  6   0  60   136.5     4        7        9       17       19
## 4  9   0  61   179.6     1        6        7        9        3
## 5 11   0  59   175.8     2        6        7       16       13
## 6 15   0  69   167.6     1        6        6        6       11
</code></pre>

<p>In the lecture on parameter estimation we talked about the z transformation, normalizes variables so that they
have a mean of zero through the formula z=(X-m)/sd. To convert back from z-scores to raw data X=z*sd+m
Let&#39;s calculate the z-score for the first variable in AGE (52)</p>

<pre><code class="r">mu&lt;-mean(can$AGE)
stn.d&lt;-sd(can$AGE)
(52-mu)/stn.d
</code></pre>

<pre><code>## [1] -0.5908
</code></pre>

<p>We get -0.59 or just about 2/3rds of a standard deviation lower than the mean of 60 which can also be expressed
as:</p>

<pre><code class="r">mu-stn.d*0.59
</code></pre>

<pre><code>## [1] 52.01
</code></pre>

<p>To transform an entire variable into a its z-transformed version use the scale function and create a new
variable</p>

<pre><code class="r">can$AGE.Z&lt;-scale(can$AGE)
head(can)
</code></pre>

<pre><code>##   ID TRT AGE WEIGHIN STAGE TOTALCIN TOTALCW2 TOTALCW4 TOTALCW6    AGE.Z
## 1  1   0  52   124.0     2        6        6        6        7 -0.59078
## 2  5   0  77   160.0     1        9        6       10        9  1.34239
## 3  6   0  60   136.5     4        7        9       17       19  0.02784
## 4  9   0  61   179.6     1        6        7        9        3  0.10516
## 5 11   0  59   175.8     2        6        7       16       13 -0.04949
## 6 15   0  69   167.6     1        6        6        6       11  0.72378
</code></pre>

<p>Let&#39;s recode our treatment variable to state if a given patient was given the treatment or placebo</p>

<pre><code class="r">can$TRT.CODE&lt;-factor(can$TRT, level=c(0:1), labels=c(&quot;Placebo&quot;, &quot;Aloe Juice&quot;))
</code></pre>

<p>Be don&#39;t have any missing data and because this is an experiment we have very good measurements
about the weight and treatment patterns of each person in the study. Extremely abnormal patients 
have been screened out in the pre-study testing so we don&#39;t have to worry about missing data or
outliers. So let&#39;s dive straight into analysis.
The first thing we are interested in is if our subject population is significantly different from the 
average weight of the popular (in this case people in Michigan or the US depending on how broadly you 
define things). Through the national health institute I&#39;ve determined that the average weight for men in this
age range is roughly 170lbs. Given this population average is our sample significantly different?
To find out we can do a one sample t-test. This compares a sample&#39;s mean to a population mean in order
to see if there is a statistically meaningful difference between the two given the standard error of the sample.</p>

<pre><code class="r">mean(can$WEIGHIN)
</code></pre>

<pre><code>## [1] 178.3
</code></pre>

<pre><code class="r">t.onesamp&lt;-t.test(can$WEIGHIN, mu=170)
t.onesamp
</code></pre>

<pre><code>## 
##  One Sample t-test
## 
## data:  can$WEIGHIN
## t = 1.295, df = 24, p-value = 0.2077
## alternative hypothesis: true mean is not equal to 170
## 95 percent confidence interval:
##  165.1 191.5
## sample estimates:
## mean of x 
##     178.3
</code></pre>

<p>Our p-value is high, this means that there is not a difference between the sample and the population which
is big enough to attribute to something other than chance. This bodes well for the generalizability of our
study. 
Next let&#39;s make sure that the ages in our two treatment conditions as close enough. For this we&#39;ll use an 
independent sample t-test. This compares the means between two groups where membership is independent, i.e.
membership in group A precludes membership in group B. Because of the experimental controls people in the 
placebo group cannot be in the treatment group and vice versa, so the two are independent
Before we test this however we need to see if the variance between the two groups is equal, as this will
influence how the t-test is calculated. We can do this with Levene&#39;s test. The null hypothesis for this test
is that the variances are equal. So if p&gt;0.05 then the two groups have roughly equal variance. If p&lt;0.05 then
the variance is not equal and we have to modify our t-test. The formula in R for the levene test features the
variable whose variance you are measuring first followed by a comma then a factor which breaks the data up into
two groups, in this case the two treatment groups.
Just a note, R is actually doing a  Brown-Forsythe test here comparing the medians of two groups, but the syntax is called Levene Test so we&#39;ll stick with that name to avoid confusion.</p>

<pre><code class="r">leveneTest(can$AGE, can$TRT.CODE)
</code></pre>

<pre><code>## Levene&#39;s Test for Homogeneity of Variance (center = median)
##       Df F value Pr(&gt;F)  
## group  1    4.44  0.046 *
##       23                 
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
</code></pre>

<p>The value is significant so we need to tell our t-test to use the formula adapted for independent groups with
different variances Notice the tilde sign between age and the treatment code variable. This notation will appear more and more
often as we start to use R more to differentiate dependent variables from other parts of a model.</p>

<pre><code class="r">t.indie&lt;-t.test(can$AGE~can$TRT.CODE, var.equal=FALSE)
t.indie
</code></pre>

<pre><code>## 
##  Welch Two Sample t-test
## 
## data:  can$AGE by can$TRT.CODE
## t = 0.0579, df = 14.23, p-value = 0.9546
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -11.92  12.58
## sample estimates:
##    mean in group Placebo mean in group Aloe Juice 
##                    59.79                    59.45
</code></pre>

<p>For giggles let&#39;s run it with the equal variance formula to see the difference.</p>

<pre><code class="r">t.indie.giggles&lt;-t.test(can$AGE~can$TRT.CODE, var.equal=TRUE)
t.indie.giggles
</code></pre>

<pre><code>## 
##  Two Sample t-test
## 
## data:  can$AGE by can$TRT.CODE
## t = 0.0622, df = 23, p-value = 0.9509
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -10.68  11.34
## sample estimates:
##    mean in group Placebo mean in group Aloe Juice 
##                    59.79                    59.45
</code></pre>

<p>As you can see they are close but there is some variance between the two results. That can be the difference between
a significant or non-significant result in many cases!
Next, let&#39;s look at if participation in the study had an impact on the various treatment scores recorded
during the study. For this we&#39;ll be looking at the same subjects with two different sets of observations.
Therefore the groups cannot be independent as the paired observations are from the same subjects. Therefore
we do a paired samples t-test which compares the mean at the start of the study to the values two weeks in.</p>

<pre><code class="r">t.paired&lt;-t.test(can$TOTALCIN,can$TOTALCW2,paired=TRUE)
t.paired
</code></pre>

<pre><code>## 
##  Paired t-test
## 
## data:  can$TOTALCIN and can$TOTALCW2
## t = -3.49, df = 24, p-value = 0.001887
## alternative hypothesis: true difference in means is not equal to 0
## 95 percent confidence interval:
##  -2.8007 -0.7193
## sample estimates:
## mean of the differences 
##                   -1.76
</code></pre>

<p>There is a significant difference and it is going downwards, woohoo!
And done, don&#39;t forget to raise a beer to Student and his t-test when you get a chance.</p>

<h4><a href="http://joshaclark.com/?page_id=138">Back</a></h4>

</body>

</html>
